# =============================================================================
# CONFIGURACIÓN DE LA APLICACIÓN MOVIESTATS BACKEND
# =============================================================================

# Nombre de la aplicación Spring Boot
spring.application.name=Backend

# =============================================================================
# CONFIGURACIÓN DE LA BASE DE DATOS POSTGRESQL (SUPABASE)
# =============================================================================

# 1. URL de conexión a la base de datos PostgreSQL en Supabase
# Incluye el modo SSL requerido para conexiones seguras
spring.datasource.url=jdbc:postgresql://aws-1-sa-east-1.pooler.supabase.com:5432/postgres?sslmode=require

# Usuario de la base de datos proporcionado por Supabase
spring.datasource.username=postgres.ngjlgvzljqhflkzcmlmj

# Contraseña de la base de datos (debe mantenerse segura y no versionarse)
spring.datasource.password=moviestats2025

# 2. Driver JDBC para PostgreSQL (requerido para la conexión)
spring.datasource.driver-class-name=org.postgresql.Driver

# =============================================================================
# CONFIGURACIÓN DE JPA/HIBERNATE
# =============================================================================

# Estrategia de actualización automática del esquema de la base de datos
# 'update': Actualiza el esquema sin borrar datos existentes
spring.jpa.hibernate.ddl-auto=update

# Mostrar las consultas SQL generadas en los logs (útil para debugging)
spring.jpa.show-sql=true

# Formatear las consultas SQL en los logs para mejor legibilidad
spring.jpa.properties.hibernate.format_sql=true

# =============================================================================
# CONFIGURACIÓN DEL POOL DE CONEXIONES HIKARICP
# =============================================================================

# Tiempo máximo de espera para obtener una conexión del pool (60 segundos)
spring.datasource.hikari.connection-timeout=60000

# Número mínimo de conexiones inactivas mantenidas en el pool
spring.datasource.hikari.minimum-idle=10

# Número máximo de conexiones activas en el pool
spring.datasource.hikari.maximum-pool-size=20

# Tiempo máximo que una conexión puede estar inactiva antes de ser cerrada (10 minutos)
spring.datasource.hikari.idle-timeout=600000

# Tiempo máximo de vida de una conexión antes de ser reemplazada (30 minutos)
spring.datasource.hikari.max-lifetime=1800000

# Deshabilitar auto-commit para mejor control transaccional
spring.datasource.hikari.auto-commit=false

# =============================================================================
# CONFIGURACIÓN DE LOGGING
# =============================================================================

# Nivel de logging general (WARN para reducir ruido en producción)
logging.level.root=WARN

# Nivel de logging específico para JPA (ERROR para ocultar warnings de Hibernate)
logging.level.org.springframework.orm.jpa=ERROR

# Habilitar logs detallados del pool de conexiones HikariCP para monitoreo
logging.level.com.zaxxer.hikari=INFO
